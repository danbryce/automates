vars: org/clulab/aske_automates/grammars/vars.yml

rules:

####DEFINITIONS####

#    todo: tests pass only for token rules
  - name: var_is_definition
    label: Definition
    priority: ${priority}
    type: token
    example: "EORATIO is defined as the maximum Kcs at LAI = 6.0"
    #action: variableArguments
    pattern: |
      @variable:Variable ( is| is defined as ) (an|a|the) @definition:Concept


  - name: var_equals_def #needed bc of bad parse
    label: Definition
    priority: ${priority}
    type: token
    example: "EORATIO is defined as the maximum Kcs at LAI = 6.0"
    #action: variableArguments
    pattern: |
      @variable:Variable "=" (an|a|the)? (?! [tag=CD]) @definition:Concept

#  - name: var_definition_appos
#    label: Definition
#    priority: ${priority}
#    type: token
#    example: "DSSAT-CSM employs the following formula for calculation of E0 (potential crop ET):"
#    #action: variableArguments
#    pattern: |
#        @variable:Variable "-LRB-" @definition:Concept "-RRB-"

  - name: var_definition_appos_bidir
    label: Definition
    priority: ${priority}
    type: token
    example: "DSSAT-CSM employs the following formula for calculation of E0 (potential crop ET):"
    #action: variableArguments
    action: selectShorterAsVariable
    pattern: |
      @c1:Concept "-LRB-" @c2:Concept  # "-RRB-"


    #todo: with the next two rules, more tests fail
  - name: var_verb
    label: Definition
    priority: ${priority}
    type: dependency
    example: "The approach uses model-simulated LAI to calculate the Kcb. E0 is calculated as the product of Kcd and ETpm."
    pattern: |
      trigger = [word=/(?i)^defin|represent|=/]
      variable:Concept = /${agents}/
      definition: Concept = /nmod_as|nmod_by|nmod_with|dobj/
      #NB!Not good for "Crop coefficients (Kcs) are calculated for the current Penman-Monteith ET approach in DSSAT-CSM as:"
#
  - name: var_cop_definition
    label: Definition
    priority: ${priority}
    type: dependency
    example: "The approach uses model-simulated LAI to calculate the Kcb. E0 is calculated as the product of Kcd and ETpm."
    pattern: |
      trigger = [lemma="be"]
      variable:Concept+ = <cop /${agents}/
      definition: Concept = <cop (?! case)
      #NB!Not good for "Crop coefficients (Kcs) are calculated for the current Penman-Monteith ET approach in DSSAT-CSM as:"
