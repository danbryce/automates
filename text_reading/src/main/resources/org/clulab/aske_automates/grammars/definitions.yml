vars: org/clulab/aske_automates/grammars/vars.yml

rules:

####DEFINITIONS####

  - name: var_equals_def #needed bc of bad parse
    label: Definition
    priority: ${priority}
    type: token
    example: "T = daily mean air temperature [°C]"
    #action: variableArguments
    pattern: |
      @variable:Variable "=" (an|a|the)? (?! [tag=CD]) @definition:Concept

#
  - name: var_definition_appos_bidir
    label: Definition
    priority: ${priority}
    type: token
    example: "DSSAT-CSM employs the following formula for calculation of E0 (potential crop ET):"
    #action: variableArguments
    action: selectShorterAsVariable
    pattern: |
      @c1:Concept "-LRB-" @c2:Concept  # "-RRB-"

  - name: var_verb
    label: Definition
    priority: ${priority}
    type: dependency
    example: "The approach uses model-simulated LAI to calculate the Kcb. E0 is calculated as the product of Kcd and ETpm."
    pattern: |
      trigger = [word=/(?i)^defin|represent|=/]
      variable:Concept = /${agents}/
      definition: Concept+ = /nmod_as|nmod_by|nmod_with|dobj/ nmod_of?
      #NB!Not good for "Crop coefficients (Kcs) are calculated for the current Penman-Monteith ET approach in DSSAT-CSM as:"

  - name: var_cop_definition
    label: Definition
    priority: ${priority}
    type: dependency
    example: "The approach uses model-simulated LAI to calculate the Kcb. E0 is calculated as the product of Kcd and ETpm."
    pattern: |
      trigger = [lemma="be"]
      variable:Concept+ = <cop /${agents}/
      definition: Concept = <cop (?! case) nmod_for?
      #NB!Not good for "Crop coefficients (Kcs) are calculated for the current Penman-Monteith ET approach in DSSAT-CSM as:"

#  - name: var_from_appendix #todo need the engine manager for long sentences where this rule can work
#    label: Definition
#    priority: ${priority}
#    type: token
#    example: "We achieve the above by learning the transformation matrix as follows: W = UtBU ⊤ s , where Ut and Us are the orthogonal transformations for target and source language embeddings, respectively, and B is a positive definite matrix representing the Mahalanobis metric."
#    pattern: |
#      @variable:Variable (?<definition> [word = /.*/ & !word="-LRB-"]+)
#      #@variable:Variable (?<defintion> [word = /.*/] (@Concept[!word="-LRB-" & !tag=/^VB/])+)


#todo changing the var_def_appos_bidir rule to a dependency version seemed to help with some cases, but broke downstream; would like to revisit
#  - name: var_def_appos_bidir_dep
#    label: Definition
#    priority: ${priority}
#    type: dependency
#    example: "DSSAT-CSM employs the following formula for calculation of E0 (potential crop ET):"
#    action: selectShorterAsVariable
#    pattern: |
#      trigger = [word="-LRB-"]
#      c1:Concept = <punct
#      c2:Concept = <punct <appos



#  - name: var_definition_appos
#    label: Definition
#    priority: ${priority}
#    type: token
#    example: "DSSAT-CSM employs the following formula for calculation of E0 (potential crop ET):"
#    #action: variableArguments
#    pattern: |
#        @variable:Variable "-LRB-" @definition:Concept "-RRB-"


