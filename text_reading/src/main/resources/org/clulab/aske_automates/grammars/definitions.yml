vars: org/clulab/aske_automates/grammars/vars.yml

rules:

####DEFINITIONS####

  - name: var_equals_def #needed bc of bad parse
    label: Definition
    priority: ${priority}
    type: dependency
    example: "T = daily mean air temperature [°C]. ETc = potential (expected) crop evapotranspiration in the absence of environmental or water stresses... "
    #action: variableArguments
    pattern: |
      trigger = [word = "="]
      variable: Variable = <dep | "nmod:npmod"
      definition: Concept = (dobj | dep) [!entity = "NUMBER"]

  - name: var_definition_appos_bidir
    label: Definition
    priority: ${priority}
    type: token
    example: "DSSAT-CSM employs the following formula for calculation of E0 (potential crop ET):"
    #action: variableArguments
    action: selectShorterAsVariable
    pattern: |
      @c1:Concept "(" @c2:Concept ")"
      #todo: check why -LRB- stopped working; maybe try to have both in the rule?

  - name: var_verb
    label: Definition
    priority: ${priority}
    type: dependency
    example: "and W represents the soil limitation to water uptake of each layer."
    action: looksLikeAVariable
    pattern: |
      trigger = [word=/(?i)^defin|represent|=/]
      variable:Concept = /${agents}/
      definition: Concept = (/nmod_as|nmod_by|nmod_with|dobj/ nmod_of?) [!entity = "NUMBER"]
      #NB!Not good for "Crop coefficients (Kcs) are calculated for the current Penman-Monteith ET approach in DSSAT-CSM as:"

  - name: var_cop_definition
    label: Definition
    priority: ${priority}
    type: dependency
    example: "LAI is the actual leaf area index"
    action: looksLikeAVariable
    pattern: |
      trigger = [lemma="be"]
      variable:Concept = <cop /${agents}/
      definition: Concept = <cop (?! case) nmod_for? [!entity = "NUMBER"]

  - name: sort_of_appos
    label: Definition
    priority: ${priority}
    type: token
    example: "whereby the effect of the climate on crop water requirements is given by the reference evapotranspiration ETo and the effect of the crop by the crop coefficient Kc. Susceptible individuals, S, are infected by infected individuals, I, at a per-capita rate βL, and infected individuals recover at a per-capita rate γ to become recovered individuals, R."
    #    action: looksLikeAVariable #TODO:check why the action filters these out
    pattern: |
      (?<= [word = /a|the/]) (?<definition> [word = /.*/ & tag = /^NN|JJ/ & !entity = "B-GreekLetter"]{2,5}) @variable:Variable #(?! [chunk = I-NP])
      #the !b-variable helps find greek letters as coefficients by avoiding finding variables preceeded by greek letters

  - name: comma_appos_var
    label: Definition
    priority: ${priority}
    type: token
    example: "Susceptible individuals, S, are infected by infected individuals, I..."
    pattern: |
      (@definition: Concept [!entity = "NUMBER"]) "," @variable:Variable (?! [lemma = "be"])
#


#  - name: def_is_known_as_var
#    label: Definition
#    priority: ${priority}
#    type: dependency
#    example: "TThe fraction, α, of the solar radiation reflected by the surface is known as the albedo."
#    #action: looksLikeAVariable
#    pattern: |
#      trigger = [word=/known/]
#      variable:Concept = nmod_as
#      definition: Concept = nsubjpass

